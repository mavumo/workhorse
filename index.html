<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jobbyist South Africa — Find the right fit. Remote-friendly.</title>
  <meta name="description" content="Search millions of jobs across South Africa. Remote-friendly. Smart matching. Verified companies." />

  <!-- Placeholder for Google AdSense -->
  <!--
    Replace with your AdSense script once approved:
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXX" crossorigin="anonymous"></script>
  -->

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#0f1220; --card:#1a1f36; --muted:#8a90a3; --text:#eef1f6; --accent:#6ee7ff;
      --accent-2:#7c5cff; --chip:#2a3048; --success:#22c55e; --danger:#ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.03) inset;
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(120deg,#0f1220 0%,#171a2b 50%,#121528 100%);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text)}
    a{color:inherit;text-decoration:none}
    .container{max-width:1200px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;z-index:50;background:rgba(15,18,32,.75);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 24px}
    .brand{font-weight:800;font-size:24px;letter-spacing:.2px}
    .brand .dot{color:var(--accent)}
    .menu{display:flex;gap:18px;align-items:center}
    .menu a{padding:10px 12px;border-radius:10px}
    .menu a:hover{background:rgba(255,255,255,.06)}
    .cta{background:linear-gradient(90deg,var(--accent-2),var(--accent));padding:10px 14px;border-radius:12px;font-weight:700;color:#0b0e1a;box-shadow:var(--shadow)}
    .hero{padding:48px 24px}
    .search-card{background:radial-gradient(1200px 400px at 20% 0%,rgba(124,92,255,.25),transparent 60%),radial-gradient(1000px 300px at 80% 30%,rgba(110,231,255,.2),transparent 60%),var(--card);padding:28px;border-radius:24px;box-shadow:var(--shadow)}
    .search-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .search-grid input, .search-grid select{width:100%;padding:16px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:#111427;color:var(--text)}
    .search-btn{padding:16px;border-radius:12px;background:#262c4a;color:#fff;font-weight:700;border:1px solid rgba(255,255,255,.08)}
    .kpis{display:flex;gap:40px;flex-wrap:wrap;margin-top:22px;color:#c6cbe0}
    .kpi{font-size:28px;font-weight:800}
    .section{padding:24px;margin-top:10px}
    .section h2{margin:12px 0 6px;font-size:28px}
    .muted{color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:980px){.grid{grid-template-columns:repeat(2,1fr)}.search-grid{grid-template-columns:1fr}}
    @media (max-width:640px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
    .chip{background:var(--chip);display:inline-block;padding:6px 10px;border-radius:999px;font-size:12px;margin-right:8px;margin-top:8px}
    .job-top{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:10px;background:#0d1020;display:grid;place-items:center;font-weight:800;border:1px solid rgba(255,255,255,.08)}
    .title{font-weight:700;font-size:16px}
    .company{color:#cfd3e6}
    .meta{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0}
    .actions{display:flex;gap:10px;margin-top:10px}
    button{cursor:pointer}
    .btn{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:#232845;color:#fff}
    .btn:hover{filter:brightness(1.1)}
    .btn-icon{padding:10px;border-radius:10px;background:#1f2440;border:1px solid rgba(255,255,255,.08)}
    .save.active{background:var(--success)}
    .viewmore{margin-top:18px;text-align:center}
    .verified{color:#7ee787;font-weight:700}
    .rating{display:flex;gap:6px}
    .star{filter:grayscale(.2)}
    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(8,10,20,.6);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;padding:18px;z-index:100}
    .modal{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:18px;max-width:920px;width:100%;box-shadow:var(--shadow)}
    .modal-header{padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;justify-content:space-between;align-items:center}
    .modal-body{padding:18px}
    .close{background:transparent;border:0;color:#cfd3e6;font-size:22px}
    /* Multi-step form */
    .steps{display:flex;gap:10px;margin-bottom:16px}
    .step{height:8px;flex:1;border-radius:999px;background:#2a2f4a}
    .step.active{background:linear-gradient(90deg,var(--accent-2),var(--accent))}
    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .form-grid input, .form-grid select, .form-grid textarea{padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:#14172a;color:#fff;width:100%}
    .form-nav{display:flex;justify-content:space-between;margin-top:10px}
    /* Tabs/pages */
    .page{display:none}
    .page.active{display:block}
    /* Cookie banner */
    .cookie{position:fixed;bottom:16px;left:16px;right:16px;background:#0f1327;border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:14px;display:none;z-index:80}
    /* Footer */
    footer{margin-top:52px;border-top:1px solid rgba(255,255,255,.06);padding:28px 24px;color:#bfc5db}
    .columns{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    @media (max-width:900px){.columns{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:560px){.columns{grid-template-columns:1fr}}
    /* Ads block placeholder */
    .ad{border:1px dashed rgba(255,255,255,.2);padding:14px;border-radius:12px;text-align:center;color:#aab0c6}
    /* Small helpers */
    .hidden{display:none !important}
    .pill{display:inline-block;padding:8px 12px;border-radius:999px;background:#232845;border:1px solid rgba(255,255,255,.08)}
  </style>
</head>
<body>
<header>
  <nav class="nav container">
    <a class="brand" href="#home">Jobbyist<span class="dot">.</span> South Africa</a>
    <div class="menu">
      <a href="#home">Jobs</a>
      <a href="#companies">Companies</a>
      <a href="#jobstats">JobStats</a>
      <a href="https://audit.jobbyist.co.za" target="_blank" rel="noopener">Free ResumeAudit</a>
      <a class="pill" href="#recruitment-suite">Recruitment Suite</a>
      <a class="cta" href="#pro">Get Jobbyist Pro — R99</a>
    </div>
  </nav>
</header>

<main id="app">
  <!-- HOME -->
  <section id="home" class="page active">
    <div class="container hero">
      <div class="search-card">
        <h1 style="margin:0 0 4px">Search for a job</h1>
        <p class="muted" style="margin:0 0 16px">Search thousands of roles. Do meaningful work that impacts the world.</p>
        <div class="search-grid">
          <input id="q" placeholder="Job title or keyword" />
          <input id="loc" placeholder="Location (e.g. Johannesburg, Remote)" />
          <select id="type">
            <option value="">Any type</option>
            <option>Full-time</option><option>Part-time</option><option>Contract</option><option>Internship</option><option>Remote</option>
          </select>
          <button class="search-btn" id="searchBtn">Search</button>
        </div>
        <div class="kpis">
          <div class="kpi"><span id="kpiJobs">0</span> <span class="muted">available jobs today</span></div>
          <div class="kpi"><span id="kpiCos">0</span> <span class="muted">companies today</span></div>
          <div class="kpi"><span id="kpiRemote">0</span> <span class="muted">remote-friendly</span></div>
        </div>
      </div>

      <div class="section">
        <h2>Find the right fit. <span class="muted">Remote-friendly.</span></h2>
        <p class="muted">Begin your journey by searching our latest career opportunities.</p>
        <div class="ad">AdSense Placeholder</div>
        <div id="jobGrid" class="grid" aria-live="polite"></div>
        <div class="viewmore">
          <button id="viewMore" class="btn">View more jobs</button>
        </div>
      </div>

      <!-- Jobbyist Pro CTA on homepage -->
      <div class="section card">
        <h2>Unlock everything with <span style="color:#6ee7ff">Jobbyist Pro</span> — <del>R199</del> <strong>R99</strong>/month</h2>
        <p class="muted">Limited-time offer. ResumeAudit Pro, AI job matching, personal .cv site, interview prep, ad-free experience, unlimited listings, and more.</p>
        <div class="actions">
          <a href="#pro" class="cta">Start 7-day trial</a>
          <button class="btn" onclick="openRegister('cta')">Create free account</button>
        </div>
      </div>
    </div>
  </section>

  <!-- COMPANIES -->
  <section id="companies" class="page">
    <div class="container section">
      <h2>Verified companies</h2>
      <p class="muted">Discover employers hiring now. Follow to get updates.</p>
      <div id="companyGrid" class="grid"></div>
    </div>
  </section>

  <!-- PRO PAGE -->
  <section id="pro" class="page">
    <div class="container section">
      <h2>Jobbyist Pro — Career OS for job seekers</h2>
      <p class="muted">Everything you need to get hired faster.</p>
      <ul>
        <li>ResumeAudit Pro with instant, sharable report</li>
        <li>Smart AI-powered matching + personalised recommendations</li>
        <li>Unlimited access to all listings (no registration wall)</li>
        <li>Interview prep templates & practice bank</li>
        <li>Professional profile website on your free <strong>.cv</strong> domain</li>
        <li>Ad-free browsing + priority support</li>
      </ul>
      <div class="card">
        <h3><del class="muted">R199</del> <strong>R99 / month</strong> — limited promo</h3>
        <div class="actions">
          <button class="cta" onclick="subscribePro()">Subscribe now</button>
          <button class="btn" onclick="openRegister('pro')">Create free account first</button>
        </div>
      </div>
      <div class="ad" style="margin-top:16px">AdSense Placeholder</div>
    </div>
  </section>

  <!-- RECRUITMENT SUITE PAGE -->
  <section id="recruitment-suite" class="page">
    <div class="container section">
      <h2>Recruitment Suite — early access (launches early 2026)</h2>
      <p class="muted">Turnkey talent management for SMEs: multi-channel posting, AI shortlisting, candidate CRM, careers page builder, analytics, and compliance tooling.</p>
      <div class="card">
        <h3>Create or claim your company profile</h3>
        <form id="suiteForm" onsubmit="event.preventDefault();alert('Thanks! We’ll reach out for verification.');">
          <div class="form-grid">
            <input required placeholder="Company name" />
            <input required placeholder="Company website" />
            <input required placeholder="Work email" type="email" />
            <select required>
              <option value="">Company size</option>
              <option>1–10</option><option>11–50</option><option>51–200</option><option>200–1000</option><option>1000+</option>
            </select>
            <select required>
              <option value="">Are you claiming an existing profile?</option>
              <option>Yes, claim existing profile</option>
              <option>No, create new profile</option>
            </select>
            <input placeholder="Phone (optional)" />
          </div>
          <div class="actions" style="margin-top:10px">
            <button class="cta">Request early access</button>
          </div>
        </form>
      </div>
      <p class="muted" style="margin-top:10px">After verification, you’ll be eligible to post unlimited jobs during the early access period.</p>
      <div class="ad" style="margin-top:16px">AdSense Placeholder</div>
    </div>
  </section>

  <!-- JOBSTATS PAGE -->
  <section id="jobstats" class="page">
    <div class="container section">
      <h2>JobStats — live SA job market insights</h2>
      <p class="muted">Updated continuously from our listings feed. Connect Google Sheets to power real-time charts (see implementation notes in code).</p>
      <div class="grid">
        <div class="card"><h3>Top Locations</h3><canvas id="chartLocations" height="200"></canvas></div>
        <div class="card"><h3>Top Industries</h3><canvas id="chartIndustries" height="200"></canvas></div>
        <div class="card"><h3>Remote vs On-site</h3><canvas id="chartRemote" height="200"></canvas></div>
      </div>
      <div class="ad" style="margin-top:16px">AdSense Placeholder</div>
    </div>
  </section>

  <!-- LEGAL PAGES -->
  <section id="legal-terms" class="page">
    <div class="container section">
      <h2>Terms of Service</h2>
      <p class="muted">Your standard ToS content goes here. Placeholder text…</p>
    </div>
  </section>
  <section id="legal-privacy" class="page">
    <div class="container section">
      <h2>Privacy Policy</h2>
      <p class="muted">We value your privacy. Placeholder text…</p>
    </div>
  </section>
  <section id="legal-cookies" class="page">
    <div class="container section">
      <h2>Cookie Settings</h2>
      <p class="muted">Manage preferences. Placeholder text…</p>
    </div>
  </section>
</main>

<!-- FOOTER -->
<footer>
  <div class="container columns">
    <div>
      <div class="brand">Jobbyist<span class="dot">.</span> SA</div>
      <p class="muted">© <span id="year"></span> Jobbyist South Africa.</p>
      <p><a href="#legal-terms">Terms</a> • <a href="#legal-privacy">Privacy</a> • <a href="#legal-cookies">Cookies</a></p>
    </div>
    <div>
      <h4>Job seekers</h4>
      <p><a href="#pro">Get Jobbyist Pro</a></p>
      <p><a href="https://audit.jobbyist.co.za" target="_blank">Free ResumeAudit</a></p>
      <p><a href="#home">Browse jobs</a></p>
    </div>
    <div>
      <h4>Employers</h4>
      <p><a href="#recruitment-suite">Recruitment Suite</a></p>
      <p><a href="#companies">Verified companies</a></p>
    </div>
    <div>
      <h4>Follow</h4>
      <p class="muted">@jobbyist.sa</p>
    </div>
  </div>
</footer>

<!-- COOKIE CONSENT -->
<div id="cookie" class="cookie container">
  <div style="display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap">
    <div>
      We use cookies to improve your experience. <a href="#legal-cookies">Learn more</a>.
    </div>
    <div class="actions">
      <button class="btn" onclick="dismissCookie()">Decline</button>
      <button class="cta" onclick="acceptCookie()">Accept</button>
    </div>
  </div>
</div>

<!-- REGISTRATION / ONBOARDING MODAL -->
<div id="registerModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="regTitle">
  <div class="modal">
    <div class="modal-header">
      <h3 id="regTitle">Create your free Jobbyist account</h3>
      <button class="close" onclick="closeRegister()" aria-label="Close">✕</button>
    </div>
    <div class="modal-body">
      <div class="steps" id="stepBar">
        <div class="step active"></div><div class="step"></div><div class="step"></div><div class="step"></div>
      </div>
      <!-- Multi-page onboarding -->
      <form id="onboardForm" onsubmit="event.preventDefault();finishOnboarding();">
        <!-- STEP 1: Account -->
        <div class="page active">
          <div class="form-grid">
            <input required name="fullName" placeholder="Full name" />
            <input required type="email" name="email" placeholder="Email" />
            <input required type="password" name="pass" placeholder="Create password" />
            <select required name="workAuth">
              <option value="">Work authorisation</option>
              <option>South African citizen</option>
              <option>Permanent resident</option>
              <option>Work visa</option>
              <option>Other</option>
            </select>
          </div>
          <div class="form-nav">
            <span></span>
            <button class="cta" onclick="nextStep()">Continue</button>
          </div>
        </div>
        <!-- STEP 2: Profile -->
        <div class="page">
          <div class="form-grid">
            <select required name="experience">
              <option value="">Experience level</option>
              <option>Intern / Entry</option><option>Junior</option><option>Mid</option><option>Senior</option><option>Director</option>
            </select>
            <select required name="function">
              <option value="">Primary function</option>
              <option>Software Engineering</option><option>Design</option><option>Product</option><option>Marketing</option><option>Sales</option>
              <option>Operations</option><option>Finance</option><option>Legal</option><option>HR/People</option><option>Customer Support</option>
              <option>Data/AI</option><option>Healthcare</option><option>Mining/Engineering</option><option>Retail</option><option>Education</option>
            </select>
            <input placeholder="Headline (e.g., Senior Data Analyst)" />
            <input placeholder="City, Province" />
            <textarea rows="4" placeholder="Short bio"></textarea>
          </div>
          <div class="form-nav">
            <button class="btn" onclick="prevStep()">Back</button>
            <button class="cta" onclick="nextStep()">Continue</button>
          </div>
        </div>
        <!-- STEP 3: Preferences -->
        <div class="page">
          <div class="form-grid">
            <select required name="typePref">
              <option value="">Preferred job type</option>
              <option>Full-time</option><option>Part-time</option><option>Contract</option><option>Internship</option>
            </select>
            <select required name="workMode">
              <option value="">Work mode</option>
              <option>On-site</option><option>Hybrid</option><option>Remote</option>
            </select>
            <input type="number" placeholder="Target salary (ZAR per year)" />
            <input placeholder="Skills (comma-separated)" />
            <input placeholder="LinkedIn URL (optional)" />
            <input placeholder="Portfolio / .cv URL (optional)" />
          </div>
          <div class="form-nav">
            <button class="btn" onclick="prevStep()">Back</button>
            <button class="cta" onclick="nextStep()">Continue</button>
          </div>
        </div>
        <!-- STEP 4: Uploads & Alerts -->
        <div class="page">
          <div class="form-grid">
            <input type="file" accept=".pdf,.doc,.docx" />
            <select>
              <option>Weekly job alerts</option>
              <option>Daily job alerts</option>
              <option>Off</option>
            </select>
            <label><input type="checkbox" checked /> Make my profile discoverable to verified employers</label>
            <label><input type="checkbox" /> I want to try Jobbyist Pro (7-day trial)</label>
          </div>
          <div class="form-nav">
            <button class="btn" onclick="prevStep()">Back</button>
            <button class="cta">Create account</button>
          </div>
        </div>
      </form>
      <p class="muted" style="margin-top:8px">By continuing you agree to our <a href="#legal-terms">Terms</a> and <a href="#legal-privacy">Privacy Policy</a>.</p>
    </div>
  </div>
</div>

<!-- COMPANY MODAL -->
<div id="companyModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="companyTitle">
  <div class="modal">
    <div class="modal-header">
      <h3 id="companyTitle">Company</h3>
      <button class="close" onclick="closeCompany()" aria-label="Close">✕</button>
    </div>
    <div class="modal-body" id="companyBody">
      <!-- Filled by JS -->
    </div>
  </div>
</div>

<!-- IMPLEMENTATION GUIDE & APP LOGIC -->
<script>
/* =========================================================================
   IMPLEMENTATION GUIDE (Zapier / Google Sheets / Crawlers)
   -------------------------------------------------------------------------
   1) Jobs data source:
      - Maintain a Google Sheet with columns:
        title,description,datePosted,validThrough,employmentType,companyName,
        companyUrl,logo,streetAddress,addressLocality,addressRegion,postalCode,
        salaryMin,salaryMax,salaryCurrency,workMode,jobLocationType,city,
        url,id,industry
      - Use Zapier to sync rows to a JSON endpoint (e.g., App Scripts web app)
        or push directly to this site via GitHub Actions.
      - Replace the 'jobs' array below with a fetch() to your JSON endpoint.

   2) Verified companies:
      - Keep a separate Google Sheet for companies (name, industry, hqCity,
        size, rating, logo, about, website).
      - Wire into the 'companies' array or a fetch().

   3) Google Jobs (schema.org JobPosting):
      - This script emits one JSON-LD <script type="application/ld+json"> per
        visible listing. When you switch to fetch(), keep the same fields.

   4) Framer / GitHub Pages:
      - This single-file SPA uses hash routing (#home, #companies, #pro, etc),
        perfect for static hosting and Framer embeds.

   5) Ads:
      - Replace the AdSense placeholders with your real code once approved.

   6) Registration wall:
      - Modal opens for: View more, Save Job, View/Follow company.
      - Replace finishOnboarding() with your backend signup (Formspree, Supabase,
        Firebase Auth, or a Zapier Webhook).

   ======================================================================= */

/* -------------------------- Demo data (50 jobs) ------------------------- */
const companies = [
  {name:"Naspers", city:"Cape Town", website:"https://www.naspers.com", logo:"N"},
  {name:"Sasol", city:"Johannesburg", website:"https://www.sasol.com", logo:"S"},
  {name:"MTN South Africa", city:"Johannesburg", website:"https://www.mtn.co.za", logo:"M"},
  {name:"Vodacom", city:"Midrand", website:"https://www.vodacom.co.za", logo:"V"},
  {name:"Standard Bank", city:"Johannesburg", website:"https://www.standardbank.co.za", logo:"SB"},
  {name:"FirstRand (FNB)", city:"Johannesburg", website:"https://www.fnb.co.za", logo:"F"},
  {name:"Absa Group", city:"Johannesburg", website:"https://www.absa.co.za", logo:"A"},
  {name:"Nedbank", city:"Sandton", website:"https://www.nedbank.co.za", logo:"N"},
  {name:"Discovery", city:"Sandton", website:"https://www.discovery.co.za", logo:"D"},
  {name:"Shoprite", city:"Cape Town", website:"https://www.shoprite.co.za", logo:"Sh"},
  {name:"Woolworths", city:"Cape Town", website:"https://www.woolworths.co.za", logo:"W"},
  {name:"Anglo American", city:"Johannesburg", website:"https://www.angloamerican.com", logo:"AA"},
  {name:"De Beers", city:"Johannesburg", website:"https://www.debeersgroup.com", logo:"DB"},
  {name:"Sanlam", city:"Cape Town", website:"https://www.sanlam.co.za", logo:"Sa"},
  {name:"Old Mutual", city:"Cape Town", website:"https://www.oldmutual.co.za", logo:"OM"},
  {name:"Capitec Bank", city:"Stellenbosch", website:"https://www.capitecbank.co.za", logo:"C"},
  {name:"Tiger Brands", city:"Bryanston", website:"https://www.tigerbrands.com", logo:"T"},
  {name:"Bidvest", city:"Johannesburg", website:"https://www.bidvest.co.za", logo:"B"},
  {name:"Aspen Pharmacare", city:"Durban", website:"https://www.aspenpharma.com", logo:"As"},
  {name:"Clicks Group", city:"Cape Town", website:"https://www.clicksgroup.co.za", logo:"Cl"},
  {name:"Takealot", city:"Cape Town", website:"https://www.takealot.com", logo:"Ta"},
  {name:"Mr Price", city:"Durban", website:"https://www.mrpricegroup.com", logo:"Mr"},
  {name:"Pick n Pay", city:"Cape Town", website:"https://www.picknpay.co.za", logo:"PnP"},
  {name:"Transnet", city:"Johannesburg", website:"https://www.transnet.net", logo:"Tr"},
  {name:"Eskom", city:"Johannesburg", website:"https://www.eskom.co.za", logo:"E"},
  {name:"Sappi", city:"Johannesburg", website:"https://www.sappi.com", logo:"SaP"},
  {name:"Mondi", city:"Johannesburg", website:"https://www.mondigroup.com", logo:"Mo"},
  {name:"MultiChoice", city:"Randburg", website:"https://www.multichoice.com", logo:"MC"},
  {name:"Dimension Data", city:"Johannesburg", website:"https://www.dimensiondata.com", logo:"DD"},
  {name:"BCX", city:"Centurion", website:"https://www.bcx.co.za", logo:"BCX"},
];

const roles = [
  {title:"Software Engineer", industry:"Technology", type:"Full-time", salary:[600000,900000], remote:true},
  {title:"Data Analyst", industry:"Technology", type:"Full-time", salary:[450000,700000], remote:true},
  {title:"Product Manager", industry:"Technology", type:"Full-time", salary:[800000,1200000], remote:true},
  {title:"UI/UX Designer", industry:"Design", type:"Full-time", salary:[500000,800000], remote:true},
  {title:"Marketing Manager", industry:"Marketing", type:"Full-time", salary:[550000,850000], remote:false},
  {title:"Finance Manager", industry:"Finance", type:"Full-time", salary:[700000,1100000], remote:false},
  {title:"Internal Auditor", industry:"Finance", type:"Full-time", salary:[550000,800000], remote:false},
  {title:"Legal Counsel", industry:"Legal", type:"Full-time", salary:[800000,1200000], remote:true},
  {title:"HR Business Partner", industry:"HR", type:"Full-time", salary:[600000,900000], remote:false},
  {title:"Recruiter", industry:"HR", type:"Contract", salary:[360000,600000], remote:true},
  {title:"Operations Manager", industry:"Operations", type:"Full-time", salary:[650000,950000], remote:false},
  {title:"Supply Chain Analyst", industry:"Operations", type:"Full-time", salary:[500000,780000], remote:false},
  {title:"Civil Engineer", industry:"Engineering", type:"Full-time", salary:[700000,1100000], remote:false},
  {title:"Mechanical Engineer", industry:"Engineering", type:"Full-time", salary:[700000,1100000], remote:false},
  {title:"Electrical Engineer", industry:"Engineering", type:"Full-time", salary:[700000,1100000], remote:false},
  {title:"Mining Geologist", industry:"Mining", type:"Full-time", salary:[750000,1150000], remote:false},
  {title:"Nursing Practitioner", industry:"Healthcare", type:"Full-time", salary:[420000,680000], remote:false},
  {title:"Pharmacist", industry:"Healthcare", type:"Full-time", salary:[550000,900000], remote:false},
  {title:"Retail Store Manager", industry:"Retail", type:"Full-time", salary:[350000,500000], remote:false},
  {title:"E-commerce Operations Lead", industry:"Retail", type:"Full-time", salary:[600000,900000], remote:true},
  {title:"QA Tester", industry:"Technology", type:"Full-time", salary:[450000,720000], remote:true},
  {title:"Data Scientist", industry:"Technology", type:"Full-time", salary:[900000,1400000], remote:true},
  {title:"Cloud Engineer", industry:"Technology", type:"Full-time", salary:[800000,1300000], remote:true},
  {title:"Customer Success Manager", industry:"Customer Support", type:"Full-time", salary:[480000,780000], remote:true},
  {title:"Sales Executive", industry:"Sales", type:"Full-time", salary:[400000,900000], remote:true},
  {title:"Business Analyst", industry:"Business", type:"Full-time", salary:[550000,850000], remote:true},
  {title:"Project Manager", industry:"Business", type:"Full-time", salary:[650000,1000000], remote:true},
  {title:"Risk Manager", industry:"Finance", type:"Full-time", salary:[800000,1200000], remote:false},
  {title:"Compliance Officer", industry:"Legal", type:"Full-time", salary:[650000,950000], remote:false},
  {title:"Content Strategist", industry:"Marketing", type:"Part-time", salary:[250000,420000], remote:true},
];

const cities = [
  {locality:"Johannesburg", region:"Gauteng", postal:"2000", street:"123 Business St"},
  {locality:"Cape Town", region:"Western Cape", postal:"8000", street:"22 Longmarket Rd"},
  {locality:"Durban", region:"KwaZulu-Natal", postal:"4001", street:"7 Beach Ave"},
  {locality:"Pretoria", region:"Gauteng", postal:"0002", street:"45 Union St"},
  {locality:"Sandton", region:"Gauteng", postal:"2196", street:"10 Rivonia Rd"},
  {locality:"Stellenbosch", region:"Western Cape", postal:"7600", street:"5 Dorp St"},
  {locality:"Midrand", region:"Gauteng", postal:"1685", street:"3 New Rd"},
  {locality:"Randburg", region:"Gauteng", postal:"2194", street:"89 Republic Rd"},
];

function rand(arr){return arr[Math.floor(Math.random()*arr.length)]}
function id(){return Math.random().toString(36).slice(2,10)}
const today = new Date();
const in60 = new Date(Date.now()+60*24*60*60*1000);

const jobs = Array.from({length:50}).map((_,i)=>{
  const co = rand(companies); const ro = rand(roles); const city = rand(cities);
  const remote = ro.remote ? (Math.random()>.4 ? "HYBRID" : "TELECOMMUTE") : "ON_SITE";
  const job = {
    id: "JOB-" + id(),
    title: ro.title,
    description: `${ro.title} at ${co.name}. Join a high-impact team in ${ro.industry}. Responsibilities include cross-functional collaboration, delivery excellence and stakeholder management.`,
    datePosted: new Date(Date.now()-Math.floor(Math.random()*10)*24*60*60*1000).toISOString().split("T")[0],
    validThrough: in60.toISOString().split("T")[0],
    employmentType: ro.type,
    companyName: co.name,
    companyUrl: co.website,
    logo: co.logo,
    streetAddress: city.street,
    addressLocality: city.locality,
    addressRegion: city.region,
    postalCode: city.postal,
    salaryMin: ro.salary[0],
    salaryMax: ro.salary[1],
    salaryCurrency: "ZAR",
    workMode: remote==="TELECOMMUTE"?"Remote":(remote==="HYBRID"?"Hybrid":"On-site"),
    jobLocationType: remote,
    city: city.locality,
    url: "https://jobbyist.africa/jobs/"+encodeURIComponent(ro.title.toLowerCase().replace(/\s+/g,'-'))+"-"+i,
    industry: ro.industry,
    remote: remote!=="ON_SITE"
  };
  return job;
});

/* ---------------------- Verified company profiles (10) ------------------ */
const verifiedCos = [
  {name:"Naspers", size:"10k+", rating:4.4, hq:"Cape Town", industry:"Technology & Media", about:"Global consumer internet group and one of the largest tech investors.", website:"https://www.naspers.com"},
  {name:"Sasol", size:"30k+", rating:4.2, hq:"Johannesburg", industry:"Energy & Chemicals", about:"Integrated energy and chemical company.", website:"https://www.sasol.com"},
  {name:"MTN South Africa", size:"18k+", rating:4.3, hq:"Johannesburg", industry:"Telecommunications", about:"Leading mobile operator across Africa.", website:"https://www.mtn.co.za"},
  {name:"Vodacom", size:"10k+", rating:4.1, hq:"Midrand", industry:"Telecommunications", about:"Part of the Vodafone Group.", website:"https://www.vodacom.co.za"},
  {name:"Standard Bank", size:"50k+", rating:4.4, hq:"Johannesburg", industry:"Financial Services", about:"Africa’s largest bank by assets.", website:"https://www.standardbank.co.za"},
  {name:"Discovery", size:"12k+", rating:4.5, hq:"Sandton", industry:"Financial Services & Health", about:"Shared-value insurance and health innovation leader.", website:"https://www.discovery.co.za"},
  {name:"Shoprite", size:"140k+", rating:4.0, hq:"Cape Town", industry:"Retail", about:"Africa’s largest fast-moving consumer goods retailer.", website:"https://www.shoprite.co.za"},
  {name:"Anglo American", size:"90k+", rating:4.2, hq:"Johannesburg", industry:"Mining", about:"Global mining company.", website:"https://www.angloamerican.com"},
  {name:"Capitec Bank", size:"15k+", rating:4.6, hq:"Stellenbosch", industry:"Banking", about:"Digital-first South African bank.", website:"https://www.capitecbank.co.za"},
  {name:"Takealot", size:"7k+", rating:4.3, hq:"Cape Town", industry:"E-commerce", about:"South Africa’s leading online retailer.", website:"https://www.takealot.com"}
];

/* ------------------------------- UI Render ------------------------------ */
const jobGrid = document.getElementById('jobGrid');
const kpiJobs = document.getElementById('kpiJobs');
const kpiCos = document.getElementById('kpiCos');
const kpiRemote = document.getElementById('kpiRemote');

function renderJobs(list=jobs){
  jobGrid.innerHTML = '';
  list.forEach((j,idx)=>{
    const el = document.createElement('div');
    el.className='card';
    el.innerHTML = `
      <div class="job-top">
        <div class="logo" aria-hidden="true">${j.logo}</div>
        <div>
          <div class="title">${j.title}</div>
          <div class="company">${j.companyName} • ${j.city} • <span class="muted">${j.workMode}</span></div>
        </div>
      </div>
      <div class="meta">
        <span class="chip">${j.employmentType}</span>
        <span class="chip">ZAR ${formatNum(j.salaryMin)}–${formatNum(j.salaryMax)}</span>
        <span class="chip">${j.industry}</span>
      </div>
      <p class="muted">${j.description}</p>
      <div class="actions">
        <a class="btn" href="${j.url}" onclick="event.preventDefault();openRegister('view');">View job</a>
        <button class="btn-icon save" title="Save" onclick="openRegister('save')">★</button>
        <a class="btn" href="#pro">Go Pro (R99)</a>
      </div>
      <small class="muted">Posted ${j.datePosted}</small>
    `;
    jobGrid.appendChild(el);
    // Emit Google Jobs JSON-LD for each listing (compliant)
    const ld = {
      "@context":"https://schema.org/",
      "@type":"JobPosting",
      "title": j.title,
      "description": j.description,
      "datePosted": j.datePosted,
      "validThrough": j.validThrough,
      "employmentType": j.employmentType,
      "directApply": true,
      "hiringOrganization": {"@type":"Organization","name": j.companyName, "sameAs": j.companyUrl},
      "jobLocationType": j.jobLocationType,
      "jobLocation": j.jobLocationType==="TELECOMMUTE" ? undefined : {
        "@type":"Place",
        "address":{"@type":"PostalAddress","streetAddress": j.streetAddress,"addressLocality": j.addressLocality,"addressRegion": j.addressRegion,"postalCode": j.postalCode,"addressCountry":"ZA"}
      },
      "applicantLocationRequirements": j.jobLocationType==="TELECOMMUTE" ? {"@type":"Country","name":"ZA"} : undefined,
      "baseSalary":{"@type":"MonetaryAmount","currency": j.salaryCurrency,"value":{"@type":"QuantitativeValue","minValue": j.salaryMin,"maxValue": j.salaryMax,"unitText":"YEAR"}},
      "industry": j.industry,
      "identifier":{"@type":"PropertyValue","name":"Jobbyist South Africa","value": j.id},
      "url": j.url
    };
    const s = document.createElement('script');
    s.type = "application/ld+json";
    s.textContent = JSON.stringify(ld);
    document.head.appendChild(s);
  });
  kpiJobs.textContent = list.length.toLocaleString('en-ZA');
  kpiCos.textContent = new Set(list.map(x=>x.companyName)).size.toLocaleString('en-ZA');
  kpiRemote.textContent = list.filter(x=>x.remote).length.toLocaleString('en-ZA');
}
function formatNum(n){return n.toLocaleString('en-ZA')}

/* Search */
document.getElementById('searchBtn').addEventListener('click',()=>{
  const q = document.getElementById('q').value.toLowerCase();
  const loc = document.getElementById('loc').value.toLowerCase();
  const type = document.getElementById('type').value;
  const filtered = jobs.filter(j=>
    (!q || (j.title.toLowerCase().includes(q)||j.companyName.toLowerCase().includes(q)||j.industry.toLowerCase().includes(q))) &&
    (!loc || j.city.toLowerCase().includes(loc) || (loc.includes('remote') && j.remote)) &&
    (!type || j.employmentType===type || (type==='Remote' && j.remote))
  );
  renderJobs(filtered);
});

/* View more -> registration wall */
document.getElementById('viewMore').addEventListener('click',()=>openRegister('viewmore'));

/* Companies grid */
const companyGrid = document.getElementById('companyGrid');
function renderCompanies(){
  companyGrid.innerHTML='';
  verifiedCos.forEach(c=>{
    const el = document.createElement('div');
    el.className='card';
    el.innerHTML = `
      <div class="job-top">
        <div class="logo">${c.name.split(' ').map(w=>w[0]).slice(0,2).join('')}</div>
        <div>
          <div class="title">${c.name} <span class="verified">✔</span></div>
          <div class="muted">${c.industry} • HQ: ${c.hq} • ${c.size} employees</div>
        </div>
      </div>
      <p class="muted">${c.about}</p>
      <div class="rating">${"★★★★★".split('').map((s,i)=>`<span class="star">${i<Math.round(c.rating)?'★':'☆'}</span>`).join('')} <span class="muted">(${c.rating.toFixed(1)})</span></div>
      <div class="actions">
        <button class="btn" onclick="openCompany('${encodeURIComponent(c.name)}')">View profile</button>
        <button class="btn" onclick="openRegister('follow')">Follow</button>
      </div>
    `;
    companyGrid.appendChild(el);
  });
}

/* Company modal content */
function openCompany(nameEnc){
  const c = verifiedCos.find(v=>encodeURIComponent(v.name)===nameEnc);
  const body = document.getElementById('companyBody');
  document.getElementById('companyTitle').textContent = c.name+' — Verified';
  body.innerHTML = `
    <p class="muted">${c.about}</p>
    <p><strong>Industry:</strong> ${c.industry} • <strong>HQ:</strong> ${c.hq} • <strong>Size:</strong> ${c.size}</p>
    <p><a class="pill" href="${c.website}" target="_blank" rel="noopener">Visit website</a></p>
    <div style="margin:12px 0">
      <label>Rate this company:</label>
      <div class="actions" style="margin-top:6px">${[1,2,3,4,5].map(n=>`<button class="btn" onclick="alert('Thanks for rating ${n} star(s)!')">${'★'.repeat(n)}</button>`).join(' ')}</div>
    </div>
    <div class="actions">
      <button class="cta" onclick="openRegister('follow')">Follow for job updates</button>
      <button class="btn" onclick="openRegister('review')">Write a review</button>
    </div>
  `;
  document.getElementById('companyModal').style.display='flex';
}
function closeCompany(){document.getElementById('companyModal').style.display='none'}

/* Registration wall modal control */
const regModal = document.getElementById('registerModal');
function openRegister(source){
  regModal.dataset.source = source || '';
  regModal.style.display='flex';
}
function closeRegister(){regModal.style.display='none'}

/* Multi-step onboarding */
let step=0;
const pages = document.querySelectorAll('#onboardForm .page');
const bar = document.getElementById('stepBar').children;
function nextStep(){event.preventDefault(); if(step<pages.length-1){pages[step].classList.remove('active'); bar[step].classList.remove('active'); step++; pages[step].classList.add('active'); bar[step].classList.add('active');}}
function prevStep(){event.preventDefault(); if(step>0){pages[step].classList.remove('active'); bar[step].classList.remove('active'); step--; pages[step].classList.add('active'); bar[step].classList.add('active');}}
function finishOnboarding(){
  alert('Account created! We’ll email you a verification link and add your profile to the Job Seeker Directory for employers to discover.');
  closeRegister();
}

/* Cookie banner */
const cookie = document.getElementById('cookie');
function acceptCookie(){localStorage.setItem('cookieOK','1'); cookie.style.display='none'}
function dismissCookie(){localStorage.setItem('cookieOK','0'); cookie.style.display='none'}

/* Routing */
function showPage(id){
  document.querySelectorAll('#app .page').forEach(p=>p.classList.remove('active'));
  const el = document.querySelector(id) || document.querySelector('#home');
  el.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
}
window.addEventListener('hashchange',()=>showPage(location.hash));
document.getElementById('year').textContent = new Date().getFullYear();

/* Charts (vanilla Canvas) */
function drawBar(canvasId, labels, values){
  const c = document.getElementById(canvasId); const ctx = c.getContext('2d');
  const w = c.width = c.clientWidth; const h = c.height = 220;
  const max = Math.max(...values) || 1;
  const pad = 32; const barW = (w - pad*2) / values.length * .7;
  ctx.clearRect(0,0,w,h);
  values.forEach((v,i)=>{
    const x = pad + i*((w-pad*2)/values.length) + 8;
    const y = h - pad - (v/max)*(h-pad*2);
    ctx.fillStyle = '#7c5cff'; ctx.fillRect(x,y,barW,h-pad-y);
    ctx.fillStyle = '#cfd3e6'; ctx.font='12px Inter'; ctx.textAlign='center';
    ctx.fillText(labels[i], x+barW/2, h-10);
  });
}

/* Init */
renderJobs(jobs);
renderCompanies();
if(!localStorage.getItem('cookieOK')) cookie.style.display='block';
showPage(location.hash || '#home');

/* JobStats from jobs[] */
function rebuildStats(){
  const byCity = {};
  const byIndustry = {};
  let remote=0, onsite=0;
  jobs.forEach(j=>{
    byCity[j.city]=(byCity[j.city]||0)+1;
    byIndustry[j.industry]=(byIndustry[j.industry]||0)+1;
    j.remote ? remote++ : onsite++;
  });
  const topCity = Object.entries(byCity).sort((a,b)=>b[1]-a[1]).slice(0,6);
  const topInd = Object.entries(byIndustry).sort((a,b)=>b[1]-a[1]).slice(0,6);
  drawBar('chartLocations', topCity.map(x=>x[0]), topCity.map(x=>x[1]));
  drawBar('chartIndustries', topInd.map(x=>x[0]), topInd.map(x=>x[1]));
  drawBar('chartRemote', ['Remote/Hybrid','On-site'], [remote, onsite]);
}
rebuildStats();

/* Pro subscribe stub */
function subscribePro(){ alert('Thanks! Redirecting to secure checkout at R99/month…'); location.hash='#pro'; }

/* Accessibility tweaks */
document.addEventListener('keydown', e=>{
  if(e.key==='Escape'){ closeRegister(); closeCompany(); }
});
</script>
</html>